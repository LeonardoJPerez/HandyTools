version: 1.0.{build}
configuration: Debug
platform: Any CPU

before_build:
- cmd: nuget restore

build:
  project: HandyTools.sln
  verbosity: minimal
  
environment:
  access_token:
    secure: ZQQ+zSR7as/HV8jDAzoCGcyckNahNpFZ97J+CNiHGZeQrkNWvLPyZWVBeaxzUvJv
    
on_success:
  - git config --global credential.helper store
  - ps: Add-Content "$env:USERPROFILE\.git-credentials" "https://$($env:access_token):x-oauth-basic@github.gatech.edu/gt-omscs-dbscd/CS6400Spring16Team60.git`n"
  - git config --global user.email "find.leonardo@gmail.com"
  - git config --global user.name "lpere42" 
  - git config --global push.default matching
  - git remote rename origin upstream
  - git remote add origin https://github.gatech.edu/gt-omscs-dbscd/CS6400Spring16Team60.git
  - git checkout master
  - git push origin master

notifications:
- provider: Slack
  incoming_webhook: https://hooks.slack.com/services/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
  channel: handytools-bot
  on_build_success: true
  on_build_failure: true
  on_build_status_changed: true
   